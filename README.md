# Проект: Генератор текста и извлечение номеров телефонов

В этом репозитории два скрипта на Python:

1. **text_generator.py** – генерирует текстовый файл заданного размера с параграфами, содержащими случайные номера телефонов.
2. **phone_extractor.py** – парсит текстовый файл, извлекает, нормализует и сохраняет уникальные номера телефонов с помощью multiprocessing.

---

## Содержание

- [Возможности](#возможности)
- [Требования](#требования)
- [Установка](#установка)
- [Использование](#использование)
  - [Генерация текста](#генерация-текста)
  - [Извлечение номеров](#извлечение-номеров)
- [Настройка](#настройка)

---

## Возможности

**text_generator.py**:
- Задает размер выходного файла в МБ
- Несколько форматов отображения номера телефона
- Вывод в кодировке UTF-8

**phone_extractor.py**:
- Чтение больших файлов блоками
- Параллельная обработка для ускорения
- Нормализация в формат `+7(YYY)XXX-XX-XX`
- Фильтрация дубликатов

---

## Требования

- Python 3.10+
- `pip`
- (Рекомендуется) виртуальное окружение `venv` или `virtualenv`

---

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone git@github.com:AlexandrShunyaev2701/Agro.git
   cd Agro
   ```
2. Создайте и активируйте виртуальное окружение:
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate    # Linux/macOS
   .\.venv\Scripts\activate   # Windows
   ```
3. Установите зависимости:
   ```bash
   pip install -r req.txt
   ```

---

## Использование

### Генерация текста

```bash
python text_generator.py --output GENERATED.txt --size-mb 10
```

- `--output`, `-o` – имя выходного файла (по умолчанию `generated.txt`)
- `--size-mb`, `-s` – размер файла в мегабайтах (по умолчанию `5`)

Скрипт будет записывать параграфы до достижения указанного размера.

### Извлечение номеров

```bash
python phone_extractor.py -i GENERATED.txt -o phones.txt -w 4
```

- `--input`, `-i` – путь к исходному файлу (обязательно)
- `--output`, `-o` – куда сохранить результаты (stdout, если не указано)
- `--workers`, `-w` – число процессов (по умолчанию — количество ядер CPU)

В результате каждая строка файла `phones.txt` будет содержать уникальный номер в формате:

```
+7(912)345-67-89
+7(900)123-45-67
...
```

---

## Настройка

- Файл `constants.py` содержит компоненты регулярного выражения и константу `BLOCK_SIZE` (в МБ). Изменяйте при необходимости.
- Логирование через `loguru` — уровень INFO.
